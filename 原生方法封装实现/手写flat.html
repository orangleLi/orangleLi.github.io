<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>æ‰‹å†™flat</title>
</head>
<body>
	
</body>
<script>
	const animals = ["ğŸ·", ["ğŸ¶", "ğŸ‚"], ["ğŸ", ["ğŸ‘", ["ğŸ²"]], "ğŸ›"]];

	// ä½¿ç”¨reduce
	// function flat(arr) {
		// return arr.reduce((total,currentValue) => {
		// 	return total.concat(currentValue instanceof Array ? flat(currentValue) : currentValue)
		// }, [])
	// }

	// ä½¿ç”¨æ ˆçš„æ€æƒ³
	// function flat(arr) {
	// 	let stack = [].concat(arr);
	// 	let result = [];
	// 	while(stack.length !== 0) {
	// 		let val = stack.pop();
	// 		if (val instanceof Array) {
	// 			stack.push(...val)
	// 		} else {
	// 			result.unshift(val);
	// 		}
	// 	}
	// 	return result;
	// }

	//  reduce(), forEach(), filter(),every() å’Œ some() éƒ½ä¼šè·³è¿‡ç©ºä½ã€‚
	// å‚æ•°æ§åˆ¶å±•å¼€å±‚æ•°
	function flat(arr, num = 1) {
		return num > 0
			? arr.reduce((total,currentValue) => {
				return total.concat(Array.isArray(currentValue) ? flat(currentValue, num - 1) : currentValue)
			}, [])
			:
			arr.slice()
	}
	
	console.log(flat(animals))
	console.log(flat(animals, 2))
	console.log(flat(animals, 3))
	console.log(flat(animals, Infinity))
	// // ä¸ä¼ å‚æ•°æ—¶ï¼Œé»˜è®¤â€œæ‹‰å¹³â€ä¸€å±‚
	// animals.flat();
	// // ["ğŸ·", "ğŸ¶", "ğŸ‚", "ğŸ", ["ğŸ‘", ["ğŸ²"]], "ğŸ›"]

	// // ä¼ å…¥ä¸€ä¸ªæ•´æ•°å‚æ•°ï¼Œæ•´æ•°å³â€œæ‹‰å¹³â€çš„å±‚æ•°
	// animals.flat(2);
	// // ["ğŸ·", "ğŸ¶", "ğŸ‚", "ğŸ", "ğŸ‘", ["ğŸ²"], "ğŸ›"]

	// // Infinity å…³é”®å­—ä½œä¸ºå‚æ•°æ—¶ï¼Œæ— è®ºå¤šå°‘å±‚åµŒå¥—ï¼Œéƒ½ä¼šè½¬ä¸ºä¸€ç»´æ•°ç»„
	// animals.flat(Infinity);
	// // ["ğŸ·", "ğŸ¶", "ğŸ‚", "ğŸ", "ğŸ‘", "ğŸ²", "ğŸ›"]

	// // ä¼ å…¥ <=0 çš„æ•´æ•°å°†è¿”å›åŸæ•°ç»„ï¼Œä¸â€œæ‹‰å¹³â€
	// animals.flat(0);
	// animals.flat(-10);
	// // ["ğŸ·", ["ğŸ¶", "ğŸ‚"], ["ğŸ", ["ğŸ‘", ["ğŸ²"]], "ğŸ›"]];

	// // å¦‚æœåŸæ•°ç»„æœ‰ç©ºä½ï¼Œflat()æ–¹æ³•ä¼šè·³è¿‡ç©ºä½ã€‚
	// ["ğŸ·", "ğŸ¶", "ğŸ‚", "ğŸ",,].flat();
	// // ["ğŸ·", "ğŸ¶", "ğŸ‚", "ğŸ"]
</script>
</html>